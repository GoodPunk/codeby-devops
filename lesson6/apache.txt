Script started on 2025-01-16 16:53:24+03:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="202" LINES="60"]
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo lsx[K[Kx
lxc               lxd               lxd.benchmark     lxd.buginfo       lxd.check-kernel  lxd.lxc           lxd.lxc-to-lxd    lxd.migrate       
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo lxc launch ubuntu:20.04 apache
[sudo] password for andrey: 
Creating apache
Retrieving image: metadata: 100% (2.04GB/s)                                            Retrieving image: rootfs: 1% (9.92MB/s)                                            Retrieving image: rootfs: 2% (17.24MB/s)                                            Retrieving image: rootfs: 3% (22.98MB/s)                                            Retrieving image: rootfs: 4% (27.45MB/s)                                            Retrieving image: rootfs: 5% (30.91MB/s)                                            Retrieving image: rootfs: 6% (33.92MB/s)                                            Retrieving image: rootfs: 7% (36.55MB/s)                                            Retrieving image: rootfs: 8% (36.69MB/s)                                            Retrieving image: rootfs: 9% (37.53MB/s)                                            Retrieving image: rootfs: 10% (39.14MB/s)                                            Retrieving image: rootfs: 10% (40.66MB/s)                                            Retrieving image: rootfs: 11% (41.75MB/s)                                            Retrieving image: rootfs: 12% (43.03MB/s)                                            Retrieving image: rootfs: 13% (44.19MB/s)                                            Retrieving image: rootfs: 14% (45.27MB/s)                                            Retrieving image: rootfs: 15% (45.94MB/s)                                            Retrieving image: rootfs: 16% (46.80MB/s)                                            Retrieving image: rootfs: 17% (47.63MB/s)                                            Retrieving image: rootfs: 18% (48.20MB/s)                                            Retrieving image: rootfs: 19% (48.85MB/s)                                            Retrieving image: rootfs: 19% (49.51MB/s)                                            Retrieving image: rootfs: 20% (50.12MB/s)                                            Retrieving image: rootfs: 21% (50.49MB/s)                                            Retrieving image: rootfs: 22% (51.02MB/s)                                            Retrieving image: rootfs: 23% (51.54MB/s)                                            Retrieving image: rootfs: 24% (51.88MB/s)                                            Retrieving image: rootfs: 25% (52.30MB/s)                                            Retrieving image: rootfs: 26% (52.69MB/s)                                            Retrieving image: rootfs: 27% (53.10MB/s)                                            Retrieving image: rootfs: 28% (53.35MB/s)                                            Retrieving image: rootfs: 29% (53.69MB/s)                                            Retrieving image: rootfs: 29% (54.02MB/s)                                            Retrieving image: rootfs: 30% (54.30MB/s)                                            Retrieving image: rootfs: 31% (54.54MB/s)                                            Retrieving image: rootfs: 32% (54.81MB/s)                                            Retrieving image: rootfs: 33% (55.10MB/s)                                            Retrieving image: rootfs: 34% (55.06MB/s)                                            Retrieving image: rootfs: 35% (55.32MB/s)                                            Retrieving image: rootfs: 36% (55.59MB/s)                                            Retrieving image: rootfs: 37% (55.67MB/s)                                            Retrieving image: rootfs: 38% (55.91MB/s)                                            Retrieving image: rootfs: 38% (56.16MB/s)                                            Retrieving image: rootfs: 39% (56.39MB/s)                                            Retrieving image: rootfs: 40% (56.43MB/s)                                            Retrieving image: rootfs: 41% (56.65MB/s)                                            Retrieving image: rootfs: 42% (56.85MB/s)                                            Retrieving image: rootfs: 43% (56.93MB/s)                                            Retrieving image: rootfs: 44% (57.11MB/s)                                            Retrieving image: rootfs: 45% (57.29MB/s)                                            Retrieving image: rootfs: 46% (57.47MB/s)                                            Retrieving image: rootfs: 47% (57.52MB/s)                                            Retrieving image: rootfs: 47% (57.68MB/s)                                            Retrieving image: rootfs: 48% (57.52MB/s)                                            Retrieving image: rootfs: 49% (57.26MB/s)                                            Retrieving image: rootfs: 50% (57.01MB/s)                                            Retrieving image: rootfs: 51% (57.11MB/s)                                            Retrieving image: rootfs: 52% (57.26MB/s)                                            Retrieving image: rootfs: 53% (57.30MB/s)                                            Retrieving image: rootfs: 54% (57.45MB/s)                                            Retrieving image: rootfs: 55% (57.60MB/s)                                            Retrieving image: rootfs: 56% (57.64MB/s)                                            Retrieving image: rootfs: 56% (57.78MB/s)                                            Retrieving image: rootfs: 57% (57.91MB/s)                                            Retrieving image: rootfs: 58% (57.98MB/s)                                            Retrieving image: rootfs: 59% (58.07MB/s)                                            Retrieving image: rootfs: 60% (58.20MB/s)                                            Retrieving image: rootfs: 61% (58.31MB/s)                                            Retrieving image: rootfs: 62% (58.36MB/s)                                            Retrieving image: rootfs: 63% (58.45MB/s)                                            Retrieving image: rootfs: 64% (58.56MB/s)                                            Retrieving image: rootfs: 65% (58.63MB/s)                                            Retrieving image: rootfs: 66% (58.71MB/s)                                            Retrieving image: rootfs: 66% (58.81MB/s)                                            Retrieving image: rootfs: 67% (58.90MB/s)                                            Retrieving image: rootfs: 68% (58.94MB/s)                                            Retrieving image: rootfs: 69% (59.02MB/s)                                            Retrieving image: rootfs: 70% (59.12MB/s)                                            Retrieving image: rootfs: 71% (59.17MB/s)                                            Retrieving image: rootfs: 72% (59.24MB/s)                                            Retrieving image: rootfs: 73% (59.32MB/s)                                            Retrieving image: rootfs: 74% (59.38MB/s)                                            Retrieving image: rootfs: 75% (59.45MB/s)                                            Retrieving image: rootfs: 75% (59.50MB/s)                                            Retrieving image: rootfs: 76% (59.56MB/s)                                            Retrieving image: rootfs: 77% (59.65MB/s)                                            Retrieving image: rootfs: 78% (59.69MB/s)                                            Retrieving image: rootfs: 79% (59.72MB/s)                                            Retrieving image: rootfs: 80% (59.80MB/s)                                            Retrieving image: rootfs: 81% (59.87MB/s)                                            Retrieving image: rootfs: 82% (59.88MB/s)                                            Retrieving image: rootfs: 83% (59.96MB/s)                                            Retrieving image: rootfs: 84% (60.02MB/s)                                            Retrieving image: rootfs: 84% (60.06MB/s)                                            Retrieving image: rootfs: 85% (60.10MB/s)                                            Retrieving image: rootfs: 86% (60.15MB/s)                                            Retrieving image: rootfs: 87% (60.23MB/s)                                            Retrieving image: rootfs: 88% (60.24MB/s)                                            Retrieving image: rootfs: 89% (60.30MB/s)                                            Retrieving image: rootfs: 90% (60.36MB/s)                                            Retrieving image: rootfs: 91% (60.40MB/s)                                            Retrieving image: rootfs: 92% (60.43MB/s)                                            Retrieving image: rootfs: 93% (60.48MB/s)                                            Retrieving image: rootfs: 94% (60.54MB/s)                                            Retrieving image: rootfs: 94% (60.57MB/s)                                            Retrieving image: rootfs: 95% (60.45MB/s)                                            Retrieving image: rootfs: 96% (60.51MB/s)                                            Retrieving image: rootfs: 97% (60.38MB/s)                                            Retrieving image: rootfs: 98% (60.44MB/s)                                            Retrieving image: rootfs: 99% (60.50MB/s)                                            Retrieving image: rootfs: 100% (60.49MB/s)                                            Retrieving image: Unpack: 100% (1.75GB/s)                                            Retrieving image: Unpack: 100% (1.75GB/s)                                            Starting apache
Remapping container filesystem                                                                                             ]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ exit
exit

Script done on 2025-01-16 16:55:43+03:00 [COMMAND_EXIT_CODE="0"]
Script started on 2025-01-16 16:57:05+03:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="202" LINES="60"]
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo lxc exec apache /bin/bash
[sudo] password for andrey: 
]0;root@apache: ~root@apache:~# 
]0;root@apache: ~root@apache:~# 
]0;root@apache: ~root@apache:~# apt install apa[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kapt install apache2
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 21%Reading package lists... 21%Reading package lists... 32%Reading package lists... 32%Reading package lists... 47%Reading package lists... 47%Reading package lists... 54%Reading package lists... 54%Reading package lists... 68%Reading package lists... 68%Reading package lists... 78%Reading package lists... 78%Reading package lists... 92%Reading package lists... 92%Reading package lists... 92%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree       
Reading state information... 0%Reading state information... 0%Reading state information... Done
The following additional packages will be installed:
  apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libjansson4 liblua5.2-0 ssl-cert
Suggested packages:
  apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser openssl-blacklist
The following NEW packages will be installed:
  apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libjansson4 liblua5.2-0 ssl-cert
0 upgraded, 11 newly installed, 0 to remove and 0 not upgraded.
Need to get 1875 kB of archives.
After this operation, 8121 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
[33m0% [Working][0m            Get:1 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libapr1 amd64 1.6.5-1ubuntu1.1 [91.5 kB]
[33m0% [1 libapr1 0 B/91.5 kB 0%][0m[33m                             6% [Working][0m            Get:2 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libaprutil1 amd64 1.6.1-4ubuntu2.2 [85.1 kB]
[33m6% [2 libaprutil1 0 B/85.1 kB 0%][0m[33m                                 11% [Working][0m             Get:3 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libaprutil1-dbd-sqlite3 amd64 1.6.1-4ubuntu2.2 [10.5 kB]
[33m11% [3 libaprutil1-dbd-sqlite3 0 B/10.5 kB 0%][0m[33m                                              13% [Working][0m             Get:4 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 libaprutil1-ldap amd64 1.6.1-4ubuntu2.2 [8752 B]
[33m13% [4 libaprutil1-ldap 0 B/8752 B 0%][0m[33m                                      16% [Working][0m             Get:5 http://archive.ubuntu.com/ubuntu focal/main amd64 libjansson4 amd64 2.12-1build1 [28.9 kB]
[33m16% [5 libjansson4 0 B/28.9 kB 0%][0m[33m                                  19% [Working][0m             Get:6 http://archive.ubuntu.com/ubuntu focal/main amd64 liblua5.2-0 amd64 5.2.4-1.1build3 [106 kB]
[33m19% [6 liblua5.2-0 0 B/106 kB 0%][0m[33m                                 25% [Working][0m             Get:7 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 apache2-bin amd64 2.4.41-4ubuntu3.21 [1189 kB]
[33m25% [7 apache2-bin 0 B/1189 kB 0%][0m[33m                                  78% [Working][0m             Get:8 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 apache2-data all 2.4.41-4ubuntu3.21 [159 kB]
[33m78% [8 apache2-data 0 B/159 kB 0%][0m[33m                                  86% [Working][0m             Get:9 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 apache2-utils amd64 2.4.41-4ubuntu3.21 [84.7 kB]
[33m86% [9 apache2-utils 0 B/84.7 kB 0%][0m[33m                                    92% [Working][0m             Get:10 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 apache2 amd64 2.4.41-4ubuntu3.21 [95.6 kB]
[33m92% [10 apache2 0 B/95.6 kB 0%][0m[33m                               97% [Working][0m             Get:11 http://archive.ubuntu.com/ubuntu focal/main amd64 ssl-cert all 1.0.39 [17.0 kB]
[33m97% [11 ssl-cert 0 B/17.0 kB 0%][0m[33m                                100% [Working][0m              Fetched 1875 kB in 1s (1510 kB/s)
Preconfiguring packages ...

7[0;59r8[1ASelecting previously unselected package libapr1:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 32322 files and directories currently installed.)
Preparing to unpack .../00-libapr1_1.6.5-1ubuntu1.1_amd64.deb ...
7[60;0f[42m[30mProgress: [  0%][49m[39m [....................................................................................................................................................................................] 87[60;0f[42m[30mProgress: [  2%][49m[39m [####................................................................................................................................................................................] 8Unpacking libapr1:amd64 (1.6.5-1ubuntu1.1) ...
7[60;0f[42m[30mProgress: [  4%][49m[39m [########............................................................................................................................................................................] 8Selecting previously unselected package libaprutil1:amd64.
Preparing to unpack .../01-libaprutil1_1.6.1-4ubuntu2.2_amd64.deb ...
7[60;0f[42m[30mProgress: [  7%][49m[39m [###########.........................................................................................................................................................................] 8Unpacking libaprutil1:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [  9%][49m[39m [################....................................................................................................................................................................] 8Selecting previously unselected package libaprutil1-dbd-sqlite3:amd64.
Preparing to unpack .../02-libaprutil1-dbd-sqlite3_1.6.1-4ubuntu2.2_amd64.deb ...
7[60;0f[42m[30mProgress: [ 11%][49m[39m [###################.................................................................................................................................................................] 8Unpacking libaprutil1-dbd-sqlite3:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [ 13%][49m[39m [#######################.............................................................................................................................................................] 8Selecting previously unselected package libaprutil1-ldap:amd64.
Preparing to unpack .../03-libaprutil1-ldap_1.6.1-4ubuntu2.2_amd64.deb ...
7[60;0f[42m[30mProgress: [ 16%][49m[39m [###########################.........................................................................................................................................................] 8Unpacking libaprutil1-ldap:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [ 18%][49m[39m [################################....................................................................................................................................................] 8Selecting previously unselected package libjansson4:amd64.
Preparing to unpack .../04-libjansson4_2.12-1build1_amd64.deb ...
7[60;0f[42m[30mProgress: [ 20%][49m[39m [####################################................................................................................................................................................] 8Unpacking libjansson4:amd64 (2.12-1build1) ...
7[60;0f[42m[30mProgress: [ 22%][49m[39m [#######################################.............................................................................................................................................] 8Selecting previously unselected package liblua5.2-0:amd64.
Preparing to unpack .../05-liblua5.2-0_5.2.4-1.1build3_amd64.deb ...
7[60;0f[42m[30mProgress: [ 24%][49m[39m [############################################........................................................................................................................................] 8Unpacking liblua5.2-0:amd64 (5.2.4-1.1build3) ...
7[60;0f[42m[30mProgress: [ 27%][49m[39m [###############################################.....................................................................................................................................] 8Selecting previously unselected package apache2-bin.
Preparing to unpack .../06-apache2-bin_2.4.41-4ubuntu3.21_amd64.deb ...
7[60;0f[42m[30mProgress: [ 29%][49m[39m [####################################################................................................................................................................................] 8Unpacking apache2-bin (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 31%][49m[39m [#######################################################.............................................................................................................................] 8Selecting previously unselected package apache2-data.
Preparing to unpack .../07-apache2-data_2.4.41-4ubuntu3.21_all.deb ...
7[60;0f[42m[30mProgress: [ 33%][49m[39m [###########################################################.........................................................................................................................] 8Unpacking apache2-data (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 36%][49m[39m [################################################################....................................................................................................................] 8Selecting previously unselected package apache2-utils.
Preparing to unpack .../08-apache2-utils_2.4.41-4ubuntu3.21_amd64.deb ...
7[60;0f[42m[30mProgress: [ 38%][49m[39m [####################################################################................................................................................................................] 8Unpacking apache2-utils (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 40%][49m[39m [########################################################################............................................................................................................] 8Selecting previously unselected package apache2.
Preparing to unpack .../09-apache2_2.4.41-4ubuntu3.21_amd64.deb ...
7[60;0f[42m[30mProgress: [ 42%][49m[39m [############################################################################........................................................................................................] 8Unpacking apache2 (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 44%][49m[39m [###############################################################################.....................................................................................................] 8Selecting previously unselected package ssl-cert.
Preparing to unpack .../10-ssl-cert_1.0.39_all.deb ...
7[60;0f[42m[30mProgress: [ 47%][49m[39m [####################################################################################................................................................................................] 8Unpacking ssl-cert (1.0.39) ...
7[60;0f[42m[30mProgress: [ 49%][49m[39m [########################################################################################............................................................................................] 8Setting up libapr1:amd64 (1.6.5-1ubuntu1.1) ...
7[60;0f[42m[30mProgress: [ 51%][49m[39m [###########################################################################################.........................................................................................] 87[60;0f[42m[30mProgress: [ 53%][49m[39m [###############################################################################################.....................................................................................] 8Setting up libjansson4:amd64 (2.12-1build1) ...
7[60;0f[42m[30mProgress: [ 56%][49m[39m [####################################################################################################................................................................................] 87[60;0f[42m[30mProgress: [ 58%][49m[39m [########################################################################################################............................................................................] 8Setting up ssl-cert (1.0.39) ...
7[60;0f[42m[30mProgress: [ 60%][49m[39m [############################################################################################################........................................................................] 87[60;0f[42m[30mProgress: [ 62%][49m[39m [###############################################################################################################.....................................................................] 8Setting up liblua5.2-0:amd64 (5.2.4-1.1build3) ...
7[60;0f[42m[30mProgress: [ 64%][49m[39m [###################################################################################################################.................................................................] 87[60;0f[42m[30mProgress: [ 67%][49m[39m [#######################################################################################################################.............................................................] 8Setting up apache2-data (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 69%][49m[39m [###########################################################################################################################.........................................................] 87[60;0f[42m[30mProgress: [ 71%][49m[39m [################################################################################################################################....................................................] 8Setting up libaprutil1:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [ 73%][49m[39m [####################################################################################################################################................................................] 87[60;0f[42m[30mProgress: [ 76%][49m[39m [########################################################################################################################################............................................] 8Setting up libaprutil1-ldap:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [ 78%][49m[39m [############################################################################################################################################........................................] 87[60;0f[42m[30mProgress: [ 80%][49m[39m [################################################################################################################################################....................................] 8Setting up libaprutil1-dbd-sqlite3:amd64 (1.6.1-4ubuntu2.2) ...
7[60;0f[42m[30mProgress: [ 82%][49m[39m [####################################################################################################################################################................................] 87[60;0f[42m[30mProgress: [ 84%][49m[39m [########################################################################################################################################################............................] 8Setting up apache2-utils (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 87%][49m[39m [###########################################################################################################################################################.........................] 87[60;0f[42m[30mProgress: [ 89%][49m[39m [###############################################################################################################################################################.....................] 8Setting up apache2-bin (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 91%][49m[39m [####################################################################################################################################################################................] 87[60;0f[42m[30mProgress: [ 93%][49m[39m [########################################################################################################################################################################............] 8Setting up apache2 (2.4.41-4ubuntu3.21) ...
7[60;0f[42m[30mProgress: [ 96%][49m[39m [############################################################################################################################################################################........] 8Enabling module mpm_event.
Enabling module authz_core.
Enabling module authz_host.
Enabling module authn_core.
Enabling module auth_basic.
Enabling module access_compat.
Enabling module authn_file.
Enabling module authz_user.
Enabling module alias.
Enabling module dir.
Enabling module autoindex.
Enabling module env.
Enabling module mime.
Enabling module negotiation.
Enabling module setenvif.
Enabling module filter.
Enabling module deflate.
Enabling module status.
Enabling module reqtimeout.
Enabling conf charset.
Enabling conf localized-error-pages.
Enabling conf other-vhosts-access-log.
Enabling conf security.
Enabling conf serve-cgi-bin.
Enabling site 000-default.
Created symlink /etc/systemd/system/multi-user.target.wants/apache2.service → /lib/systemd/system/apache2.service.
Created symlink /etc/systemd/system/multi-user.target.wants/apache-htcacheclean.service → /lib/systemd/system/apache-htcacheclean.service.
7[60;0f[42m[30mProgress: [ 98%][49m[39m [################################################################################################################################################################################....] 8Processing triggers for ufw (0.36-6ubuntu1.1) ...
Processing triggers for systemd (245.4-4ubuntu3.24) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.16) ...

7[0;60r8[1A[J]0;root@apache: ~root@apache:~# service apach[K[K[K[K[Kapa[K[K[K[K[K[K[K[K[K[K[Kifco[K[K[Kp a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
6: eth0@if7: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 00:16:3e:59:70:32 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 10.68.123.66/24 metric 100 brd 10.68.123.255 scope global dynamic eth0
       valid_lft 3362sec preferred_lft 3362sec
    inet6 fd42:5f4:3f71:f6ac:216:3eff:fe59:7032/64 scope global dynamic mngtmpaddr noprefixroute 
       valid_lft 3428sec preferred_lft 3428sec
    inet6 fe80::216:3eff:fe59:7032/64 scope link 
       valid_lft forever preferred_lft forever
]0;root@apache: ~root@apache:~# systemctl status apache2
[?1h=[0;1;32m●[0m apache2.service - The Apache HTTP Server[m
     Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)[m
     Active: [0;1;32mactive (running)[0m since Thu 2025-01-16 13:58:32 UTC; 1min 39s ago[m
       Docs: https://httpd.apache.org/docs/2.4/[m
   Main PID: 1357 (apache2)[m
      Tasks: 54 (limit: 2256)[m
     Memory: 6.6M[m
     CGroup: /system.slice/apache2.service[m
             ├─1357 /usr/sbin/apache2 -k start[m
             ├─1359 /usr/sbin/apache2 -k start[m
             └─1360 /usr/sbin/apache2 -k start[m
[m
Jan 16 13:58:32 apache systemd[1]: Starting The Apache HTTP Server...[m
Jan 16 13:58:32 apache systemd[1]: Started The Apache HTTP Server.[m
[K[?1l>]0;root@apache: ~root@apache:~# exit
exit
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens18: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 9e:17:3a:11:aa:0d brd ff:ff:ff:ff:ff:ff
    inet 185.210.59.137/26 brd 185.210.59.191 scope global ens18
       valid_lft forever preferred_lft forever
    inet6 fe80::9c17:3aff:fe11:aa0d/64 scope link 
       valid_lft forever preferred_lft forever
4: tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/none 
    inet 10.8.0.1/24 brd 10.8.0.255 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::f20f:7f52:b3a9:664b/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
5: lxdbr0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 00:16:3e:84:0b:95 brd ff:ff:ff:ff:ff:ff
    inet 10.68.123.1/24 scope global lxdbr0
       valid_lft forever preferred_lft forever
    inet6 fd42:5f4:3f71:f6ac::1/64 scope global 
       valid_lft forever preferred_lft forever
    inet6 fe80::216:3eff:fe84:b95/64 scope link 
       valid_lft forever preferred_lft forever
7: veth649451ea@if6: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master lxdbr0 state UP group default qlen 1000
    link/ether 3a:33:48:10:51:9e brd ff:ff:ff:ff:ff:ff link-netnsid 0
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ exit
exit

Script done on 2025-01-16 17:01:56+03:00 [COMMAND_EXIT_CODE="0"]
Script started on 2025-01-16 17:09:52+03:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="202" LINES="60"]
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ telnet 10.68.123.66 80
Trying 10.68.123.66...
Connected to 10.68.123.66.
Escape character is '^]'.
^C
Connection closed by foreign host.
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens18: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 9e:17:3a:11:aa:0d brd ff:ff:ff:ff:ff:ff
    inet 185.210.59.137/26 brd 185.210.59.191 scope global ens18
       valid_lft forever preferred_lft forever
    inet6 fe80::9c17:3aff:fe11:aa0d/64 scope link 
       valid_lft forever preferred_lft forever
4: tun0: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 100
    link/none 
    inet 10.8.0.1/24 brd 10.8.0.255 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::f20f:7f52:b3a9:664b/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
5: lxdbr0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 00:16:3e:84:0b:95 brd ff:ff:ff:ff:ff:ff
    inet 10.68.123.1/24 scope global lxdbr0
       valid_lft forever preferred_lft forever
    inet6 fd42:5f4:3f71:f6ac::1/64 scope global 
       valid_lft forever preferred_lft forever
    inet6 fe80::216:3eff:fe84:b95/64 scope link 
       valid_lft forever preferred_lft forever
7: veth649451ea@if6: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master lxdbr0 state UP group default qlen 1000
    link/ether 3a:33:48:10:51:9e brd ff:ff:ff:ff:ff:ff link-netnsid 0
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ iptables -t nat -A PREROUTING -i ens18 -p tcp --dport 8080 -j DNAT --to 10.68.123.66:80
DNAT: Could not determine whether revision 2 is supported, assuming it is.
DNAT: Could not determine whether revision 2 is supported, assuming it is.
Fatal: can't open lock file /run/xtables.lock: Permission denied
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ iptables -t nat -A PREROUTING -i ens18 -p tcp --dport 8080 -j DNAT --to 10.68.123.66:80[1@s[1@u[1@d[1@o[1@ 
[sudo] password for andrey: 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ ss -tup[Klpn
Netid              State               Recv-Q              Send-Q                                      Local Address:Port                             Peer Address:Port              Process              
udp                UNCONN              0                   0                                             10.68.123.1:53                                    0.0.0.0:*                                      
udp                UNCONN              0                   0                                           127.0.0.53%lo:53                                    0.0.0.0:*                                      
udp                UNCONN              0                   0                                          0.0.0.0%lxdbr0:67                                    0.0.0.0:*                                      
udp                UNCONN              0                   0                                                 0.0.0.0:1194                                  0.0.0.0:*                                      
udp                UNCONN              0                   0                                 [fd42:5f4:3f71:f6ac::1]:53                                       [::]:*                                      
udp                UNCONN              0                   0                                             [::]%lxdbr0:547                                      [::]:*                                      
tcp                LISTEN              0                   128                                             127.0.0.1:6010                                  0.0.0.0:*                                      
tcp                LISTEN              0                   32                                            10.68.123.1:53                                    0.0.0.0:*                                      
tcp                LISTEN              0                   4096                                        127.0.0.53%lo:53                                    0.0.0.0:*                                      
tcp                LISTEN              0                   128                                               0.0.0.0:22                                    0.0.0.0:*                                      
tcp                LISTEN              0                   128                                                 [::1]:6010                                     [::]:*                                      
tcp                LISTEN              0                   32                                [fd42:5f4:3f71:f6ac::1]:53                                       [::]:*                                      
tcp                LISTEN              0                   128                                                  [::]:22                                       [::]:*                                      
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ iptable[K[K[K[K[K[K[Ksudo s[Kiptables [K --list
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     icmp --  anywhere             anywhere             icmp parameter-problem /* generated for LXD network lxdbr0 */
ACCEPT     icmp --  anywhere             anywhere             icmp time-exceeded /* generated for LXD network lxdbr0 */
ACCEPT     icmp --  anywhere             anywhere             icmp destination-unreachable /* generated for LXD network lxdbr0 */
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:domain /* generated for LXD network lxdbr0 */
ACCEPT     udp  --  anywhere             anywhere             udp dpt:domain /* generated for LXD network lxdbr0 */
ACCEPT     udp  --  anywhere             anywhere             udp dpt:bootps /* generated for LXD network lxdbr0 */
ACCEPT     udp  --  anywhere             anywhere             udp dpt:openvpn
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED
ACCEPT     tcp  --  10.192.77.254        anywhere             tcp dpt:ssh
ACCEPT     udp  --  anywhere             anywhere             udp dpt:openvpn
ACCEPT     all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere             /* generated for LXD network lxdbr0 */
ACCEPT     all  --  anywhere             anywhere             /* generated for LXD network lxdbr0 */
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
DROP       all  --  anywhere             anywhere            

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     icmp --  anywhere             anywhere             icmp parameter-problem /* generated for LXD network lxdbr0 */
ACCEPT     icmp --  anywhere             anywhere             icmp time-exceeded /* generated for LXD network lxdbr0 */
ACCEPT     icmp --  anywhere             anywhere             icmp destination-unreachable /* generated for LXD network lxdbr0 */
ACCEPT     tcp  --  anywhere             anywhere             tcp spt:domain /* generated for LXD network lxdbr0 */
ACCEPT     udp  --  anywhere             anywhere             udp spt:domain /* generated for LXD network lxdbr0 */
ACCEPT     udp  --  anywhere             anywhere             udp spt:bootps /* generated for LXD network lxdbr0 */
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo iptables --list[K[K[K[K[Kt nat 
iptables v1.8.4 (legacy): no command specified
Try `iptables -h' or 'iptables --help' for more information.
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo iptables -t nat -k[Kl
iptables v1.8.4 (legacy): unknown option "-l"
Try `iptables -h' or 'iptables --help' for more information.
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ sudo iptables -t nat -l[KL
Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         
DNAT       tcp  --  anywhere             anywhere             tcp dpt:http-alt to:10.68.123.66:80

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         
MASQUERADE  all  --  10.68.123.0/24      !10.68.123.0/24       /* generated for LXD network lxdbr0 */
MASQUERADE  all  --  10.8.0.0/24          anywhere            
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson6andrey@andrey-codeby-devops:~/codeby-devops/lesson6$ exit
exit

Script done on 2025-01-16 17:13:12+03:00 [COMMAND_EXIT_CODE="0"]
