Script started on 2025-01-13 14:54:44+03:00 [TERM="xterm" TTY="/dev/pts/7" COLUMNS="202" LINES="60"]
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ exitjava -versionexit[K[Ksystemctl is-enabled nginx.service
enabled
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ sudo systemctl disable nginx.service
[sudo] password for andrey: 
Synchronizing state of nginx.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install disable nginx
Removed /etc/systemd/system/multi-user.target.wants/nginx.service.
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ systemctl ng[K[K[K[K[K[K[K[K[K[K[K[Kexit
exit

Script done on 2025-01-13 14:55:32+03:00 [COMMAND_EXIT_CODE="0"]
Script started on 2025-01-13 15:10:48+03:00 [TERM="xterm" TTY="/dev/pts/7" COLUMNS="202" LINES="60"]
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ cat >> /lib/sys
sysctl.d/   systemd/    sysusers.d/ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ cat >> /lib/systemd/system/nginx-codeby.service
bash: /lib/systemd/system/nginx-codeby.service: Permission denied
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ cat >> /lib/systemd/system/nginx-codeby.service[1@s[1@u[1@d[1@o[1@ 
bash: /lib/systemd/system/nginx-codeby.service: Permission denied
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ sudo cat >> /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service
bash: /lib/systemd/system/nginx-codeby.service: Permission denied
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ sudo cat > /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P/lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P/lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.service[1P /lib/systemd/system/nginx-codeby.servicev /lib/systemd/system/nginx-codeby.servicei /lib/systemd/system/nginx-codeby.servicem /lib/systemd/system/nginx-codeby.service
[?1049h[22;0;0t[>4;2m[?1h=[?2004h[1;60r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[60;1H"/lib/systemd/system/nginx-codeby.service" [New File][2;1H▽[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[1m[34m~                                                                                                                                                                                                         [3;1H~                                                                                                                                                                                                         [4;1H~                                                                                                                                                                                                         [5;1H~                                                                                                                                                                                                         [6;1H~                                                                                                                                                                                                         [7;1H~                                                                                                                                                                                                         [8;1H~                                                                                                                                                                                                         [9;1H~                                                                                                                                                                                                         [10;1H~                                                                                                                                                                                                         [11;1H~                                                                                                                                                                                                         [12;1H~                                                                                                                                                                                                         [13;1H~                                                                                                                                                                                                         [14;1H~                                                                                                                                                                                                         [15;1H~                                                                                                                                                                                                         [16;1H~                                                                                                                                                                                                         [17;1H~                                                                                                                                                                                                         [18;1H~                                                                                                                                                                                                         [19;1H~                                                                                                                                                                                                         [20;1H~                                                                                                                                                                                                         [21;1H~                                                                                                                                                                                                         [22;1H~                                                                                                                                                                                                         [23;1H~                                                                                                                                                                                                         [24;1H~                                                                                                                                                                                                         [25;1H~                                                                                                                                                                                                         [26;1H~                                                                                                                                                                                                         [27;1H~                                                                                                                                                                                                         [28;1H~                                                                                                                                                                                                         [29;1H~                                                                                                                                                                                                         [30;1H~                                                                                                                                                                                                         [31;1H~                                                                                                                                                                                                         [32;1H~                                                                                                                                                                                                         [33;1H~                                                                                                                                                                                                         [34;1H~                                                                                                                                                                                                         [35;1H~                                                                                                                                                                                                         [36;1H~                                                                                                                                                                                                         [37;1H~                                                                                                                                                                                                         [38;1H~                                                                                                                                                                                                         [39;1H~                                                                                                                                                                                                         [40;1H~                                                                                                                                                                                                         [41;1H~                                                                                                                                                                                                         [42;1H~                                                                                                                                                                                                         [43;1H~                                                                                                                                                                                                         [44;1H~                                                                                                                                                                                                         [45;1H~                                                                                                                                                                                                         [46;1H~                                                                                                                                                                                                         [47;1H~                                                                                                                                                                                                         [48;1H~                                                                                                                                                                                                         [49;1H~                                                                                                                                                                                                         [50;1H~                                                                                                                                                                                                         [51;1H~                                                                                                                                                                                                         [52;1H~                                                                                                                                                                                                         [53;1H~                                                                                                                                                                                                         [54;1H~                                                                                                                                                                                                         [55;1H~                                                                                                                                                                                                         [56;1H~                                                                                                                                                                                                         [57;1H~                                                                                                                                                                                                         [58;1H~                                                                                                                                                                                                         [59;1H~                                                                                                                                                                                                         [m[60;185H0,0-1[9CAll[1;1H[?25h[?25l[60;175H:[1;1H[60;1H[K[60;1H:[?2004h[?25hq[?25l[?2004l[23;2t[23;1t[60;1H[K[60;1H[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ vim /lib/systemd/system/nginx-codeby.service[1@s[1@u[1@d[1@o[1@ 
[sudo] password for andrey: 
[?1049h[22;0;0t[>4;2m[?1h=[?2004h[1;60r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[60;1H"/lib/systemd/system/nginx-codeby.service" [New File][2;1H▽[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[1m[34m~                                                                                                                                                                                                         [3;1H~                                                                                                                                                                                                         [4;1H~                                                                                                                                                                                                         [5;1H~                                                                                                                                                                                                         [6;1H~                                                                                                                                                                                                         [7;1H~                                                                                                                                                                                                         [8;1H~                                                                                                                                                                                                         [9;1H~                                                                                                                                                                                                         [10;1H~                                                                                                                                                                                                         [11;1H~                                                                                                                                                                                                         [12;1H~                                                                                                                                                                                                         [13;1H~                                                                                                                                                                                                         [14;1H~                                                                                                                                                                                                         [15;1H~                                                                                                                                                                                                         [16;1H~                                                                                                                                                                                                         [17;1H~                                                                                                                                                                                                         [18;1H~                                                                                                                                                                                                         [19;1H~                                                                                                                                                                                                         [20;1H~                                                                                                                                                                                                         [21;1H~                                                                                                                                                                                                         [22;1H~                                                                                                                                                                                                         [23;1H~                                                                                                                                                                                                         [24;1H~                                                                                                                                                                                                         [25;1H~                                                                                                                                                                                                         [26;1H~                                                                                                                                                                                                         [27;1H~                                                                                                                                                                                                         [28;1H~                                                                                                                                                                                                         [29;1H~                                                                                                                                                                                                         [30;1H~                                                                                                                                                                                                         [31;1H~                                                                                                                                                                                                         [32;1H~                                                                                                                                                                                                         [33;1H~                                                                                                                                                                                                         [34;1H~                                                                                                                                                                                                         [35;1H~                                                                                                                                                                                                         [36;1H~                                                                                                                                                                                                         [37;1H~                                                                                                                                                                                                         [38;1H~                                                                                                                                                                                                         [39;1H~                                                                                                                                                                                                         [40;1H~                                                                                                                                                                                                         [41;1H~                                                                                                                                                                                                         [42;1H~                                                                                                                                                                                                         [43;1H~                                                                                                                                                                                                         [44;1H~                                                                                                                                                                                                         [45;1H~                                                                                                                                                                                                         [46;1H~                                                                                                                                                                                                         [47;1H~                                                                                                                                                                                                         [48;1H~                                                                                                                                                                                                         [49;1H~                                                                                                                                                                                                         [50;1H~                                                                                                                                                                                                         [51;1H~                                                                                                                                                                                                         [52;1H~                                                                                                                                                                                                         [53;1H~                                                                                                                                                                                                         [54;1H~                                                                                                                                                                                                         [55;1H~                                                                                                                                                                                                         [56;1H~                                                                                                                                                                                                         [57;1H~                                                                                                                                                                                                         [58;1H~                                                                                                                                                                                                         [59;1H~                                                                                                                                                                                                         [m[60;185H0,0-1[9CAll[1;1H[?25h[?25l[60;1H[1m-- INSERT --[m[60;13H[K[60;185H0,1[11CAll[1;1H[34m# /lib/systemd/system/nginx-codeby.service
#for codeby uni[m[2;16H[K[2;16H[?25h[?25l[34mt file nginx service[m
[35m[Unit][m[3;7H[K[4;1H[32mDescription[m=[31mA high performance web s[m[4;37H[K[4;37H[?25h[?25l[31merver and a reverse proxy server[m
[32mDocumentation[m=[31mman:nginx(8)[m[5;27H[K[6;1HAft[6;4H[K[6;4H[?25h[?25l[32mAfter[m=[31mnetwork.target[m[7;1H[K[8;1H[35m[Service][m[8;10H[K[9;1H[32mType[m=[31mforking[m[9;13H[K[10;1H[32mPIDFile[m=[31m/run/nginx.pi[m[10;22H[K[10;22H[?25h[?25l[31md[m
[32mExecStartPre[m=[31m/usr/sbin/nginx -t -q -g 'daemon on; master_proc[m[11;62H[K[11;62H[?25h[?25l[31mess on;'[m
[32mExecStart[m=[31m/usr/sbin/nginx -g 'daemon on; master_proces[m[12;55H[K[12;55H[?25h[?25l[31ms on;'[m
[32mExecReload[m=[31m/usr/sbin/nginx -g 'daemon on; master_process[m[13;57H[K[13;57H[?25h[?25l[31m on;' -s reload[m
[32mExecStop[m=[31m-/sbin/start-stop-daemon --quiet --sto[m[14;48H[K[14;48H[?25h[?25l[31mp --retry QUIT/5 --pidfile /run/nginx.pid[m
[32mTimeoutStopSec[m=[31m5[m[15;17H[K[16;1HKill[16;5H[K[16;5H[?25h[?25l[60;1H[K[16;1H[32mKillMode[m=[31mmixed[m[17;1H[K[18;1H[35m[Install][m[18;10H[K[19;1H[32mWantedBy[m=[31mmulti-user.target[m[19;27H[K[60;185H19,26[9CAll[19;26H[?25h[?25l[60;175H^[[19;26H[60;175H  [19;26H[60;175H^[[19;26H[60;175H  [19;26H[?25h[?25l[60;175H:[19;26H[60;175H[K[60;1H:[?2004h[?25hwq[?25l[?2004l"/usr/lib/systemd/system/nginx-codeby.service" [New] 19L, 612C written[23;2t[23;1t
[?2004l[?1l>[?25h[>4;m[?1049l[23;0;0t]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ cat /lib/systemd/system/nginx-codeby.service
# /lib/systemd/system/nginx-codeby.service
#for codeby unit file nginx service
[Unit]
Description=A high performance web server and a reverse proxy server
Documentation=man:nginx(8)
After=network.target

[Service]
Type=forking
PIDFile=/run/nginx.pid
ExecStartPre=/usr/sbin/nginx -t -q -g 'daemon on; master_process on;'
ExecStart=/usr/sbin/nginx -g 'daemon on; master_process on;'
ExecReload=/usr/sbin/nginx -g 'daemon on; master_process on;' -s reload
ExecStop=-/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /run/nginx.pid
TimeoutStopSec=5
KillMode=mixed

[Install]
WantedBy=multi-user.target
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ systemctl daemon-reload
[1;31m==== AUTHENTICATING FOR org.freedesktop.systemd1.reload-daemon ===
[0mAuthentication is required to reload the systemd state.
Authenticating as: andrey
Password: 
[1;31m==== AUTHENTICATION COMPLETE ===
[0m]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ systemctl enable nginx-codeby.service
[1;31m==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-unit-files ===
[0mAuthentication is required to manage system service or unit files.
Authenticating as: andrey
Password: 
[1;31m==== AUTHENTICATION COMPLETE ===
[0mCreated symlink /etc/systemd/system/multi-user.target.wants/nginx-codeby.service → /lib/systemd/system/nginx-codeby.service.
[1;31m==== AUTHENTICATING FOR org.freedesktop.systemd1.reload-daemon ===
[0mAuthentication is required to reload the systemd state.
Authenticating as: andrey
Password: 
[1;31m==== AUTHENTICATION COMPLETE ===
[0m]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ systemctl start nginx-codeby.service
[1;31m==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===
[0mAuthentication is required to start 'nginx-codeby.service'.
Authenticating as: andrey
Password: 
[1;31m==== AUTHENTICATION COMPLETE ===
[0m]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ nginx [K[K[K[K[K[Kservice nginx-codeby status
[?1h=[0;1;32m●[0m nginx-codeby.service - A high performance web server and a reverse proxy server[m
     Loaded: loaded (/lib/systemd/system/nginx-codeby.service; enabled; vendor preset: enabled)[m
     Active: [0;1;32mactive (running)[0m since Mon 2025-01-13 15:13:00 MSK; 15s ago[m
       Docs: man:nginx(8)[m
    Process: 10662 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)[m
    Process: 10663 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)[m
   Main PID: 10664 (nginx)[m
      Tasks: 2 (limit: 2256)[m
     Memory: 2.5M[m
     CGroup: /system.slice/nginx-codeby.service[m
             ├─10664 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;[m
             └─10665 nginx: worker process[m
[m
Jan 13 15:13:00 andrey-codeby-devops systemd[1]: Starting A high performance web server and a reverse proxy server...[m
Jan 13 15:13:00 andrey-codeby-devops systemd[1]: Started A high performance web server and a reverse proxy server.[m
[K[?1l>]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ 
]0;andrey@andrey-codeby-devops: ~/codeby-devops/lesson4andrey@andrey-codeby-devops:~/codeby-devops/lesson4$ exit
exit

Script done on 2025-01-13 15:13:18+03:00 [COMMAND_EXIT_CODE="0"]
